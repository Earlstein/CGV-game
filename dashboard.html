<!DOCTYPE html>
<html>
<head>
	<title>Menu</title>
	<link rel="stylesheet" type="text/css" href="menu.css">
</head>

<body>
	<script type="text/javascript" src = "js/three.min.js"></script>
	
	<script>
		var scene, camera, renderer ; //Basics

		var starGeo, star, stars, skybox ;

		function render(){
			renderer.render(scene, camera) ;
		}

		function addTexture(imageURL, material){
		//This function we gon' use for adding texture to any object 
		function callback(){
			if (material){
				material.map = texture;
				material.needsUpdate = false ;
			}
		}
		var texture = new THREE.ImageUtils.loadTexture(imageURL, undefined, callback);

		return texture ;
		}

		function world(){
			//Scene
			scene = new THREE.Scene() ;

			//Camera
			camera = new THREE.PerspectiveCamera(90, window.innerWidth/window.innerHeight, 1, 1000) ;
			camera.position.z = 2 ;
			camera.rotation.x = Math.PI / 2 ;

			//Like The Space Where Stars will exist
			starGeo = new THREE.Geometry() ;

			//Putting stars in the space(StarGeo)
			for (let i = 0; i < 6000; i++ ){
				star = new THREE.Vector3(
					Math.random() * 600 - 300,
					Math.random() * 600 - 300,
					Math.random() * 600 - 300) ;
				star.velocity = 0; 
				star.acceleration = 0.02 ;
				starGeo.vertices.push(star) ;
			}

			//Adding texture to every stars
			let sprite = new THREE.TextureLoader().load('textures/stars.png');

			let starMaterial = new THREE.PointsMaterial({
				color: 0xaaaaaa,
				size: 0.7,
				map: sprite
			}) ;

			stars = new THREE.Points(starGeo, starMaterial);
			scene.add(stars ) ;


		let materialArray = [];
        materialArray.push(new THREE.MeshBasicMaterial( { map: addTexture( 'textures/night/corona_ft.png' ), shading: THREE.FlatShading} ));
        materialArray.push(new THREE.MeshBasicMaterial( { map: addTexture( 'textures/night/corona_bk.png' ), shading: THREE.FlatShading}));
        materialArray.push(new THREE.MeshBasicMaterial( { map: addTexture( 'textures/night/corona_up.png' ), shading: THREE.FlatShading}));
        materialArray.push(new THREE.MeshBasicMaterial( { map: addTexture( 'textures/night/corona_dn.png' ), shading: THREE.FlatShading}));
        materialArray.push(new THREE.MeshBasicMaterial( { map: addTexture( 'textures/night/corona_rt.png' ), shading: THREE.FlatShading}));
        materialArray.push(new THREE.MeshBasicMaterial( { map: addTexture( 'textures/night/corona_lf.png' ), shading: THREE.FlatShading}));

            for (let i = 0; i < 6; i++)
                materialArray[i].side = THREE.BackSide;

            var skyGeometry = new THREE.CubeGeometry( 600, 600, 600);
            skybox = new THREE.Mesh( skyGeometry, materialArray );
            skybox.rotation.x = -Math.PI / 2 ;
            scene.add( skybox );


			animate();
		}

		function animate(){
			requestAnimationFrame(animate) ;

			// Movement of the stars
			// Towards the camera
			starGeo.vertices.forEach(p=>{
					p.velocity += p.acceleration ;
					p.y -= p.velocity ;
						
						if (p.y < -200){
							p.y = 200; 
							p.velocity = 0;
						}
			}) ;
			starGeo.verticesNeedUpdate = true ;
			stars.rotation.y += 0.002 ;
			
			skybox.rotation.x += 0.002 ;
			skybox.rotation.z += 0.002 ;

			render();
		}
		
		function init(){
			renderer = new THREE.WebGLRenderer({
				antialias : true
			});
			renderer.setSize(window.innerWidth, window.innerHeight) ;
			document.body.appendChild(renderer.domElement) ;
			world() ;
			render() ;
		}
		init() ;
	</script>

	 	<div class="title">
	 		<p>Monsters Exist,<br/> Superheroes Exist,<br/> Inside Us<br/></p>
	 	</div>
	 	
	 	<div class= "options">
	 		<ul>
		 		<li><a href="stage_one.html">Start Game</a></li>
				<li><a href="#">High Score</a></li>
				<li><a href="#">Tutorial</a></li>
				<li><a href="#">About</a></li>
		 	</ul>
		</div>

</body>
</html>
